
************************************
------- ProjectWebAPI-.NET 7 -------

- solution -> add new project -> xUnit Test Project -> Naziv.Tests

pokreces u Visual Studio sa:

> Test
	> Run All Tests

- nove klase
	- NazivControllerTests.cs
	- NazivServiceTests.cs
	- NazivRepositoryTests.cs

naming test metode ide:
	- ImeKontrolera_ImeMetodeUkontroleru_ReturnWhat()

- za prvi unittest koristim FakeItEasy jer pratim tutorial, prvo da osposobim sve a onda cu isprobavati druge stvari
	- install nuget package u WebAPI.Tests > FakeItEasy

- Dependency injection izgleda ovako za npr kontroler test:

	private readonly StudentController _controller;
        private readonly IService _service;
        public StudentControllerTests()
        {
            _service = A.Fake<IService>(); //FakeItEasy
            _controller = new StudentController(_service); // SUT, system under test
        }

- u biti nije problem samo testiranje po sebi, nego znati sto ima smisla testirati a sto ne
	- u kontroleru, uglavnom metoda returna tri moguca rezultata - success, fail i exception
		- tako da testiram barem to
	- u servisu sam stvarno minimalno, samo provjera za return true, nista greske i exceptioni, puno je za sad
	- za repository ja malo drugacije jer sad baratam sa DbContext
		- fejkam i DbSet
		- pravim novu klasu AsyncHelper jer fejkanje DbSeta ne zna hendlat async
		- automapper pravi probleme
			- za get all morao u repositoriju rucno mapirat da magicno proradi
			- isto za get all sa parametrimas
		- async jako pravi probleme
			- za getonebyId u repositoriju morao maknuti await Context.Students.FirstOrDefaultAsync i staviti sinkrono
			- za params isto moram maknuti await i ToListAsync u ToList a npr za getall nisam morao
		- kod filtriranja pravi probleme oko malog i velikog slova, iako SwaggerUI nije 
			- za repository promijenio s.LastName.Contains(lastName) u s.LastName.ToLower().Contains(lastName.ToLower()))



************************************
------- ProjectMVC-.NET 7 -------

- razlika u kontroleru
- new xUnit project, .NET 7
- fakeiteasy
- get metode nemaju bas sta za testirati, ali dalje ove da
	- create i edit imaju vise returnova pa se vise toga da testirati
	- delete ovdje konkretno u kontroleru nije imao fail ili exception pa je jednostavniji neg moze bit

- otkrio da u listwithparams moj search nije bio case insensitive, pa prilagodio
- _output je fora
- automapper pravi probleme testu, MVC radi oke i sve dobro mapira, ali iz nekog razloga za test ne mapira, tako da sam morao rucno mapirati radi testa
	- u biti, guglanje kaze da je problem oko konflikta EF Core in-memory db i Automapperov projectto

- ListWithParams se bas lijepo da testirati


*********************************************
------ PlayPalMini-WebAPI-.NET 4.7.2 -------- 

- nema AutoMapper, ali i nije .NET 7 :/










